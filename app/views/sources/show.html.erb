<%= render layout: "sources/layout", locals: { source: @source, active: :overview } do %>
  <% if @source.messages.none? %>
    <div class="mb-8 p-4 border rounded">
      <h2 class="font-semibold mb-2">Ready to receive events</h2>
      <p class="text-sm text-gray-600 mb-3">
        Configure AWS SES to send email events to your webhook URL. Once set up, events will appear automatically.
      </p>
      <%= link_to "View Setup Instructions", source_setup_path(@source), class: "text-sm text-blue-600 hover:underline" %>
    </div>
  <% end %>

  <dl class="divide-y">
    <div class="py-3">
      <dt class="text-sm text-gray-500">Webhook URL</dt>
      <dd class="mt-1 text-sm font-mono break-all"><%= webhook_url(source_token: @source.token) %></dd>
    </div>

    <div class="py-3">
      <dt class="text-sm text-gray-500">Token</dt>
      <dd class="mt-1 text-sm font-mono"><%= @source.token %></dd>
    </div>

    <div class="py-3">
      <dt class="text-sm text-gray-500">Messages</dt>
      <dd class="mt-1 text-sm"><%= @source.messages.count %></dd>
    </div>
  </dl>
<% end %>
